[gd_scene load_steps=14 format=3 uid="uid://dqfvtiauyf1gv"]

[ext_resource type="Script" path="res://src/player/Main.gd" id="1"]
[ext_resource type="PackedScene" uid="uid://b2ks6w7bacyti" path="res://src/map/Map.tscn" id="3"]
[ext_resource type="PackedScene" uid="uid://v8ybdh5m87am" path="res://src/scenes/main/HUD.tscn" id="4"]
[ext_resource type="Script" path="res://src/skills/SpeedUp.gd" id="5"]
[ext_resource type="Script" path="res://src/skills/SkillManager.gd" id="6"]
[ext_resource type="Script" path="res://src/skills/HealthUp.gd" id="7"]
[ext_resource type="Script" path="res://src/skills/StrengthUp.gd" id="8"]
[ext_resource type="AudioStream" uid="uid://oq3tt0cscewe" path="res://src/scenes/main/Retro Battle Theme 5.ogg" id="9"]
[ext_resource type="Script" path="res://src/skills/MagnetUp.gd" id="10"]
[ext_resource type="Script" path="res://src/skills/HomingShot.gd" id="11"]
[ext_resource type="Script" path="res://src/skills/FireRateUp.gd" id="12"]
[ext_resource type="Script" path="res://src/enemy/EnemyManager.gd" id="12_cftqj"]
[ext_resource type="PackedScene" uid="uid://dbdxrkf7cbaae" path="res://src/player/Player.tscn" id="13_mgg0h"]

[node name="Main" type="Node"]
script = ExtResource("1")

[node name="Map" parent="." node_paths=PackedStringArray("player") instance=ExtResource("3")]
player = NodePath("../Player")

[node name="HUD" parent="." instance=ExtResource("4")]

[node name="SkillManager" type="Node" parent="." node_paths=PackedStringArray("player")]
script = ExtResource("6")
player = NodePath("../Player")

[node name="HealthUp" type="Node" parent="SkillManager"]
script = ExtResource("7")
increase = 20

[node name="StrengthUp" type="Node" parent="SkillManager"]
script = ExtResource("8")
type = 2

[node name="SpeedUp" type="Node" parent="SkillManager"]
script = ExtResource("5")
increase = 10
type = 1

[node name="MagnetUp" type="Node" parent="SkillManager"]
script = ExtResource("10")
increase = 15
type = 3
max_used = 4
start_level = 3

[node name="HomingShot" type="Node" parent="SkillManager"]
script = ExtResource("11")
type = 4
max_used = 1
start_level = 3

[node name="FireRateUp" type="Node" parent="SkillManager"]
script = ExtResource("12")
increase = 0.1
type = 5
max_used = 2

[node name="BGM" type="AudioStreamPlayer" parent="."]
stream = ExtResource("9")
volume_db = -20.0
autoplay = true
bus = &"Music"

[node name="EnemyManager" type="Node" parent="." node_paths=PackedStringArray("spawn_points", "player")]
script = ExtResource("12_cftqj")
spawn_points = NodePath("../Camera2D/SpawnPositions")
player = NodePath("../Player")

[node name="SpawnTimer" type="Timer" parent="EnemyManager"]
autostart = true

[node name="NewEnemyTimer" type="Timer" parent="EnemyManager"]
wait_time = 5.0
autostart = true

[node name="Camera2D" type="Camera2D" parent="."]

[node name="SpawnPositions" type="Node2D" parent="Camera2D"]

[node name="Left" type="Marker2D" parent="Camera2D/SpawnPositions"]
position = Vector2(-504, 0)

[node name="TopLeft" type="Marker2D" parent="Camera2D/SpawnPositions"]
position = Vector2(-504, -326)

[node name="TopRight" type="Marker2D" parent="Camera2D/SpawnPositions"]
position = Vector2(514, -326)

[node name="Right" type="Marker2D" parent="Camera2D/SpawnPositions"]
position = Vector2(514, 2)

[node name="BottomRight" type="Marker2D" parent="Camera2D/SpawnPositions"]
position = Vector2(514, 326)

[node name="BottomLeft" type="Marker2D" parent="Camera2D/SpawnPositions"]
position = Vector2(-501, 326)

[node name="Bottom" type="Marker2D" parent="Camera2D/SpawnPositions"]
position = Vector2(-1, 326)

[node name="Top" type="Marker2D" parent="Camera2D/SpawnPositions"]
position = Vector2(-1, -338)

[node name="Player" parent="." instance=ExtResource("13_mgg0h")]

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="Player"]
remote_path = NodePath("../../Camera2D")

[connection signal="timeout" from="EnemyManager/SpawnTimer" to="EnemyManager" method="_on_spawn_timer_timeout"]
[connection signal="timeout" from="EnemyManager/NewEnemyTimer" to="EnemyManager" method="_on_new_enemy_timer_timeout"]
[connection signal="died" from="Player" to="." method="_on_player_died"]
[connection signal="level_up" from="Player" to="." method="_on_player_level_up"]
[connection signal="skill_selected" from="Player" to="." method="_on_player_skill_selected"]
